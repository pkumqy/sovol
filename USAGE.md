# 使用说明
## 关于单位
程序中所采用的是归一化的相对单位，即：  
+ 电荷单位：`e`  
+ 速度单位：`c`  
+ 质量单位：`m_e`  

根据上面的归一化可以导出：  
+ 能量单位：`{m_e}c^2`  
+ 动量单位：`{m_e}c`  

上面所做的归一化等价于令所有公式中的`e = c = m_e = 1`.  
如果选取一个参考频率`ω`，还可以做如下的归一化：  
+ 时间单位：`1/ω`  
+ 长度单位：`c/ω`  
+ 电场强度单位：`{m_e}cω/e`  
+ 磁感应强度单位：`{m_e}ω/e`   
+ 电流密度单位：`{m_e}ω^2/{μ_0}ce`
+ 电流强度单位：`{m_e}c/{μ_0}e`

注意这个`ω`是可以自由选取的，你可以将模拟结果解释到任意尺度。对于激光这个参考频率可以选择为激光的`ω`，这样就相当于令`ω = k = 1`，不过要注意这种解释下波长为`2π`，激光周期也为`2π`.   

这种归一化好处是可以减少公式的计算量，并且不用考虑SI单位制与高斯单位制的区别。

## Web版本
### 参数输入
Web界面上的参数可以直接输入数值，也可以利用JavaScript代码输入公式，比如`2π`可以直接输入`6.2831853`也可以输入`2*Math.PI`。页面上的参数可通过`Export Args`按钮导出保存到本地文件，下次打开网页时可直接通过`Import Args`进行导入。

### 数据导出
计算数据可通过`Export Data`按钮导出，导出格式为json数组，每个数组元素为包含一个粒子数据的对象，该对象具有x,y,z,px,py,pz,t属性，这些对象都是相同长度的数组，按照模拟时间依次增大的序列排序，相同的数组index代表了同一时刻的数据。即导出文件具有以下结构：
```json
{
    "version":"1.0",
    "data":[
        {
            "x":[1.5,2.3,...],
            "y":[3.2,1.9,...],
            "z":[0.9,-8.7,...],
            "px":[1.1,0.2,...],
            "py":[1.7,8.2,...],
            "pz":[1.9,2.6,...],
            "t":[0.1,0.2,...]
        },
        ...
    ]
}
```

### 粒子束
目前的模拟采用的是先模拟完一个粒子的运动，再进行下一个粒子的运动，需要注意由于画图性能的影响，当粒子数多了之后时画图会变卡，可通过修改画图参数改善或者改用命令行版本。  
粒子数代表了这次模拟一共要模拟的粒子数目，每个粒子具体参数的选取是通过概率随机的方式得到，具体如下：
+ 默认下束流沿z轴传播，束流的前沿为xy平面，可通过改变极角及方位角参数使束流绕原点旋转，从而改变束流的朝向
+ 可通过平移参数使束流平移到任意位置，注意平移操作发生在旋转之后
+ 束流宽度表示从任意横向测量，该宽度之内的粒子数为95%（4个标准差），粒子的横向位置由正态分布给出
+ 束流长度为束流纵向尺寸，粒子纵向位置由均匀分布给出
+ 能散表示流强半高全宽定义下的能量分散程度，粒子能量由正态分布给出
+ 角度分散表示从任意横向测量，角度之内的粒子数为95%（注意角度分散仅限小角度，即可做近似`tanθ=θ`的情况），粒子动量方向由正态分布给出

另外可选择模拟算法，目前实现的算法有蛙跳以及RK4两种，一般情况下用默认的蛙跳算法即可。

### 电磁场
#### 自定义电磁场
电磁场通过JavaScript代码进行自定义输入。可以通过文件导入导出。函数中可使用x,y,z,t参数。

#### 激光脉冲
程序预设了拉盖尔高斯模式激光脉冲的电磁场，激光轴线为z轴，沿z轴正方向传播，腰为`z=0`平面，时域为`sech`型包络，可通过`Time delay`调节激光延迟，延迟为零时初始时刻激光中央位于`z=0`平面，还可通过`Initial phase`设置激光初始相位以调节载波包络相位。

### 画图
可通过自由选择x,y,z轴表示的物理量进行二维或三维画图，二维画图只需将z轴选择为`(Blank)`即可

### 控制
可通过控制模块对模拟时间以及画图速率进行控制。`Data per Frame`代表每帧更新的数据点数，`Frames per Second`代表每秒帧数，`Time step`为模拟中的时间步长，`End time`为模拟中的结束时间，`Output start`为模拟中开始输出数据的时刻，`Data interval`为模拟中每隔多长时间输出一次数据。
