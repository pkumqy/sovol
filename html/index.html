<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <script type="text/javascript" src="/sovol/wasm/libsovol-wasm.js"></script>
    <script type="text/javascript" src="/js/jquery-3.4.1.min.js"></script>
    <script type="text/javascript" src="/js/echarts.min.js"></script>
    <script type="text/javascript" src="/js/echarts-gl.min.js"></script>
    <script type="text/javascript" src="/js/ecStat.min.js"></script>
    <script type="text/javascript" src="/js/dataTool.min.js"></script>
    <script type="text/javascript" src="script.js"></script>
    <title>Sovol - A Wasm/CLI Program of Relativistic Particle Tracking in EM Field</title>
</head>

<body>
    <table style="table-layout: fixed;">
        <tr>
            <td>
                <a href="https://github.com/touuki/sovol/blob/master/USAGE.md" class="btn" target="_blank">Usage</a>
            </td>
            <td>
                <a href="https://github.com/touuki/sovol" target="_blank" class="btn">Source</a>
            </td>
            <td>
                <input id="import_args_file" style="display: none;" accept=".json" type="file"/>
                <button id="import_args" class="btn">Import Args</button>
            </td>
            <td>
                <button id="export_args" class="btn">Export Args</button>
            </td>
        </tr>
    </table>
    <div class="input-div">
        <div class="table-title">Particles Beam</div>
        <table class="input-table">
            <tr>
                <td>
                    <label for="PARTICLES_MASS">Mass [m<sub>e</sub>]</label>
                </td>
                <td>
                    <label for="PARTICLES_CHARGE">Charge [e]</label>
                </td>
            </tr>
            <tr>
                <td>
                    <input class="eval simulation-input static-input" type="text" name="PARTICLES_MASS"
                        id="PARTICLES_MASS" value="1">
                </td>
                <td>
                    <input class="eval simulation-input static-input" type="text" name="PARTICLES_CHARGE"
                        id="PARTICLES_CHARGE" value="-1">
                </td>
            </tr>
        </table>
        <table class="input-table">
            <tr>
                <td>
                    <label for="PARTICLES_WIDTH">Width [c/ω]</label>
                </td>
                <td>
                    <label for="PARTICLES_LENGTH">Length [c/ω]</label>
                </td>
                <td>
                    <label for="REALTIMEREPEATSIMULATION_REMAININGNUMBER">Particles Number</label>
                </td>
            </tr>
            <tr>
                <td>
                    <input class="eval simulation-input static-input" type="text" name="PARTICLES_WIDTH"
                        id="PARTICLES_WIDTH" value="0">
                </td>
                <td>
                    <input class="eval simulation-input static-input" type="text" name="PARTICLES_LENGTH"
                        id="PARTICLES_LENGTH" value="0">
                </td>
                <td>
                    <input class="eval simulation-input static-input" type="text"
                        name="REALTIMEREPEATSIMULATION_REMAININGNUMBER" id="REALTIMEREPEATSIMULATION_REMAININGNUMBER"
                        value="1">
                </td>
            </tr>
        </table>
        <table class="input-table">
            <tr>
                <td>
                    <label for="PARTICLES_KINETIC_ENERGY">Kinetic Energy [m<sub>e</sub>c<sup>2</sup>]</label>
                </td>
                <td>
                    <label for="PARTICLES_ENERGY_SPREAD">Energy Spread [%]</label>
                </td>
                <td>
                    <label for="PARTICLES_ANGULAR_DIVERGENCE">Angular Divergence [rad]</label>
                </td>
            </tr>
            <tr>
                <td>
                    <input class="eval simulation-input static-input" type="text" name="PARTICLES_KINETIC_ENERGY"
                        id="PARTICLES_KINETIC_ENERGY" value="0">
                </td>
                <td>
                    <input class="eval simulation-input static-input" type="text" name="PARTICLES_ENERGY_SPREAD"
                        id="PARTICLES_ENERGY_SPREAD" value="0">
                </td>
                <td>
                    <input class="eval simulation-input static-input" type="text" name="PARTICLES_ANGULAR_DIVERGENCE"
                        id="PARTICLES_ANGULAR_DIVERGENCE" value="0">
                </td>
            </tr>
        </table>
        <table class="input-table">
            <tr>
                <td>
                    <label for="PARTICLES_POLAR_ANGLE">Polar angle [rad]</label>
                </td>
                <td>
                    <label for="PARTICLES_AZIMUTHAL_ANGLE">Azimuthal angle [rad]</label>
                </td>
            </tr>
            <tr>
                <td>
                    <input class="eval simulation-input static-input" type="text" name="PARTICLES_POLAR_ANGLE"
                        id="PARTICLES_POLAR_ANGLE" value="0">
                </td>
                <td>
                    <input class="eval simulation-input static-input" type="text" name="PARTICLES_AZIMUTHAL_ANGLE"
                        id="PARTICLES_AZIMUTHAL_ANGLE" value="0">
                </td>
            </tr>
        </table>
        <table class="input-table">
            <tr>
                <td>
                    <label for="PARTICLES_TRANSLATION_X">Translation x [c/ω]</label>
                </td>
                <td>
                    <label for="PARTICLES_TRANSLATION_Y">Translation y [c/ω]</label>
                </td>
                <td>
                    <label for="PARTICLES_TRANSLATION_Z">Translation z [c/ω]</label>
                </td>
            </tr>
            <tr>
                <td>
                    <input class="eval simulation-input static-input" type="text" name="PARTICLES_TRANSLATION_X"
                        id="PARTICLES_TRANSLATION_X" value="0">
                </td>
                <td>
                    <input class="eval simulation-input static-input" type="text" name="PARTICLES_TRANSLATION_Y"
                        id="PARTICLES_TRANSLATION_Y" value="0">
                </td>
                <td>
                    <input class="eval simulation-input static-input" type="text" name="PARTICLES_TRANSLATION_Z"
                        id="PARTICLES_TRANSLATION_Z" value="0">
                </td>
            </tr>
        </table>
        <table class="input-table">
            <tr>
                <td>
                    <label for="PARTICLES_CLASSNAME">Particle Class</label>
                </td>
            </tr>
            <tr>
                <td>
                    <select class="simulation-input static-input" name="PARTICLES_CLASSNAME" id="PARTICLES_CLASSNAME">
                        <option value="LeapfrogParticle">LeapfrogParticle</option>
                        <option value="RungeKuttaParticle">RungeKuttaParticle</option>
                    </select>
                </td>
            </tr>
        </table>
    </div>

    <div class="input-div">
        <div class="table-title">Field</div>
        <table class="input-table">
            <tr>
                <td>
                    <label for="FIELD_CLASSNAME">Field Class</label>
                </td>
            </tr>
            <tr>
                <td>
                    <select class="simulation-input static-input" name="FIELD_CLASSNAME" id="FIELD_CLASSNAME">
                        <option value="CustomField">CustomField</option>
                        <option value="LaguerreGaussianPulseField">LaguerreGaussianPulseField</option>
                    </select>
                </td>
            </tr>
        </table>
        <div class="field-args" id="CustomField_args_div" style="display: none;">
            <div class="input-div2">
                <table class="input-table">
                    <tr>
                        <td>Arguments Table</td>
                        <td>
                            <button id="add_customfield_argument" class="green-button">Add</button>
                        </td>
                    </tr>
                </table>
                <table class="input-table" id="arguments_table">
                </table>
            </div>
            <table class="input-table">
                <tr>
                    <td>
                        <label for="CUSTOMFIELD_EX">E<sub>x</sub> [m<sub>e</sub>cω/e]</label>
                    </td>
                    <td>
                        <label for="CUSTOMFIELD_EY">E<sub>y</sub> [m<sub>e</sub>cω/e]</label>
                    </td>
                    <td>
                        <label for="CUSTOMFIELD_EZ">E<sub>z</sub> [m<sub>e</sub>cω/e]</label>
                    </td>
                </tr>
                <tr>
                    <td>
                        <textarea class="customfield-func static-input" rows="10" name="CUSTOMFIELD_EX"
                            id="CUSTOMFIELD_EX">return 0;</textarea>
                    </td>
                    <td>
                        <textarea class="customfield-func static-input" rows="10" name="CUSTOMFIELD_EY"
                            id="CUSTOMFIELD_EY">return 0;</textarea>
                    </td>
                    <td>
                        <textarea class="customfield-func static-input" rows="10" name="CUSTOMFIELD_EZ"
                            id="CUSTOMFIELD_EZ">return 0;</textarea>
                    </td>
                </tr>
                <tr>
                    <td>
                        <label for="CUSTOMFIELD_BX">B<sub>x</sub> [m<sub>e</sub>ω/e]</label>
                    </td>
                    <td>
                        <label for="CUSTOMFIELD_BY">B<sub>y</sub> [m<sub>e</sub>ω/e]</label>
                    </td>
                    <td>
                        <label for="CUSTOMFIELD_BZ">B<sub>z</sub> [m<sub>e</sub>ω/e]</label>
                    </td>
                </tr>
                <tr>
                    <td>
                        <textarea class="customfield-func static-input" rows="10" name="CUSTOMFIELD_BX"
                            id="CUSTOMFIELD_BX">return 0;</textarea>
                    </td>
                    <td>
                        <textarea class="customfield-func static-input" rows="10" name="CUSTOMFIELD_BY"
                            id="CUSTOMFIELD_BY">return 0;</textarea>
                    </td>
                    <td>
                        <textarea class="customfield-func static-input" rows="10" name="CUSTOMFIELD_BZ"
                            id="CUSTOMFIELD_BZ">return 0;</textarea>
                    </td>
                </tr>
            </table>
        </div>
        <div class="field-args" style="display: none;" id="LaguerreGaussianPulseField_args_div">
            <table class="input-table">
                <tr>
                    <td>
                        <label for="LAGUERREGAUSSIANPULSEFIELD_TAU">τ<sub>FWHM</sub> [1/ω]</label>
                    </td>
                    <td>
                        <label for="LAGUERREGAUSSIANPULSEFIELD_A0">a<sub>0</sub> [m<sub>e</sub>c/e]</label>
                    </td>
                    <td>
                        <label for="LAGUERREGAUSSIANPULSEFIELD_W0">w<sub>0</sub> [c/ω]</label>
                    </td>
                </tr>
                <tr>
                    <td>
                        <input class="eval simulation-input static-input" type="text"
                            name="LAGUERREGAUSSIANPULSEFIELD_TAU" id="LAGUERREGAUSSIANPULSEFIELD_TAU"
                            value="5 * 2 * Math.PI">
                    </td>
                    <td>
                        <input class="eval simulation-input static-input" type="text"
                            name="LAGUERREGAUSSIANPULSEFIELD_A0" id="LAGUERREGAUSSIANPULSEFIELD_A0" value="5">
                    </td>
                    <td>
                        <input class="eval simulation-input static-input" type="text"
                            name="LAGUERREGAUSSIANPULSEFIELD_W0" id="LAGUERREGAUSSIANPULSEFIELD_W0"
                            value="5 * 2 * Math.PI">
                    </td>
                </tr>
                <tr>
                    <td>
                        <label for="LAGUERREGAUSSIANPULSEFIELD_EY">Polar y</label>
                    </td>
                    <td>
                        <label for="LAGUERREGAUSSIANPULSEFIELD_DELAY">Time delay [1/ω]</label>
                    </td>
                    <td>
                        <label for="LAGUERREGAUSSIANPULSEFIELD_IPHASE">Initial phase [rad]</label>
                    </td>
                </tr>
                <tr>
                    <td>
                        <input class="eval simulation-input static-input" type="text"
                            name="LAGUERREGAUSSIANPULSEFIELD_EY" id="LAGUERREGAUSSIANPULSEFIELD_EY" value="0">
                    </td>
                    <td>
                        <input class="eval simulation-input static-input" type="text"
                            name="LAGUERREGAUSSIANPULSEFIELD_DELAY" id="LAGUERREGAUSSIANPULSEFIELD_DELAY"
                            value="50 * 2 * Math.PI">
                    </td>
                    <td>
                        <input class="eval simulation-input static-input" type="text"
                            name="LAGUERREGAUSSIANPULSEFIELD_IPHASE" id="LAGUERREGAUSSIANPULSEFIELD_IPHASE" value="0">
                    </td>
                </tr>
            </table>
            <table class="input-table">
                <tr>
                    <td>
                        <label for="LAGUERREGAUSSIANPULSEFIELD_P">p - Radial index</label>
                    </td>
                    <td>
                        <label for="LAGUERREGAUSSIANPULSEFIELD_L">l - Azimuthal index</label>
                    </td>
                    <td>
                        <label for="LAGUERREGAUSSIANPULSEFIELD_H">Length step [c/ω]</label>
                    </td>
                </tr>
                <tr>
                    <td>
                        <input class="eval simulation-input static-input" type="text"
                            name="LAGUERREGAUSSIANPULSEFIELD_P" id="LAGUERREGAUSSIANPULSEFIELD_P" value="0">
                    </td>
                    <td>
                        <input class="eval simulation-input static-input" type="text"
                            name="LAGUERREGAUSSIANPULSEFIELD_L" id="LAGUERREGAUSSIANPULSEFIELD_L" value="0">
                    </td>
                    <td>
                        <input class="eval simulation-input static-input" type="text"
                            name="LAGUERREGAUSSIANPULSEFIELD_H" id="LAGUERREGAUSSIANPULSEFIELD_H"
                            value="0.1 * 2 * Math.PI">
                    </td>
                </tr>
            </table>
        </div>
    </div>
    <div class="input-div" id="particles_plots_input">
        <div class="table-title">Particles Plots</div>
        <table class="input-table">
            <tr>
                <td>
                    <label for="xAxis">x-axis</label>
                </td>
                <td>
                    <label for="yAxis">y-axis</label>
                </td>
                <td>
                    <label for="zAxis">z-axis</label>
                </td>
            </tr>
            <tr>
                <td>
                    <select name="xAxis" id="xAxis">
                    </select>
                </td>
                <td>
                    <select name="yAxis" id="yAxis">
                    </select>
                </td>
                <td>
                    <select name="zAxis" id="zAxis">
                        <option value="">(Blank)</option>
                    </select>
                </td>
            </tr>
        </table>
        <table class="input-table">
            <tr>
                <td>
                    <button id="add_particles_plot" class="green-button">Add</button>
                </td>
            </tr>
        </table>
    </div>
    <div id="particles_plots"></div>
    <div class="input-div">
        <div class="table-title">Simulation Control</div>
        <table class="input-table">
            <tr>
                <td>
                    <label for="REALTIMEREPEATSIMULATION_TIMESTEP">Time step [1/ω]</label>
                </td>
                <td>
                    <label for="REALTIMEREPEATSIMULATION_ENDTIME">End time [1/ω]</label>
                </td>

            </tr>
            <tr>
                <td>
                    <input class="eval simulation-input static-input" type="text"
                        name="REALTIMEREPEATSIMULATION_TIMESTEP" id="REALTIMEREPEATSIMULATION_TIMESTEP"
                        value="0.001 * 2 * Math.PI">
                </td>
                <td>
                    <input class="eval simulation-input static-input" type="text"
                        name="REALTIMEREPEATSIMULATION_ENDTIME" id="REALTIMEREPEATSIMULATION_ENDTIME"
                        value="100 * 2 * Math.PI">
                </td>

            </tr>
            <tr>
                <td>
                    <label for="REALTIMEREPEATSIMULATION_DATASTARTTIME">Output start [1/ω]</label>
                </td>
                <td>
                    <label for="REALTIMEREPEATSIMULATION_DATAINTERVAL">Data interval [1/ω]</label>
                </td>
            </tr>
            <tr>
                <td>
                    <input class="eval simulation-input static-input" type="text"
                        name="REALTIMEREPEATSIMULATION_DATASTARTTIME" id="REALTIMEREPEATSIMULATION_DATASTARTTIME"
                        value="35 * 2 * Math.PI">
                </td>
                <td>
                    <input class="eval simulation-input static-input" type="text"
                        name="REALTIMEREPEATSIMULATION_DATAINTERVAL" id="REALTIMEREPEATSIMULATION_DATAINTERVAL"
                        value="0.01 * 2 * Math.PI">
                </td>
            </tr>
            <tr>
                <td>
                    <label for="rateControl_dpf">Data per Frame</label>
                </td>
                <td>
                    <label for="rateControl_fps">Frames per Second</label>
                </td>
            </tr>
            <tr>
                <td>
                    <input class="static-input" type="number" name="rateControl_dpf" id="rateControl_dpf" value="30"
                        pattern="\d*">
                </td>
                <td>
                    <input class="static-input" type="number" name="rateControl_fps" id="rateControl_fps" value="25"
                        pattern="\d*">
                </td>
            </tr>
        </table>
        <table class="input-table" style="table-layout: fixed;">
            <tr>
                <td>
                    <button id="start" disabled class="green-button">Start</button>
                </td>
                <td>
                    <button id="stop" class="red-button">Stop</button>
                </td>
            </tr>
        </table>
    </div>
</body>

</html>